# Тест-план и тест-кейсы для REST API GET /products/{productId}/status
## Задание T1: Написание тест-кейсов

---

## 1. Тест-план

### 1.1 Объект тестирования
REST API метод GET /products/{productId}/status с параметрами:

- productId (обязательный) — идентификатор продукта в пути URL
- authToken (обязательный) — токен авторизации, 16 символов (буквы и цифры)
- recalculate (необязательный) — может принимать значения: true, false, null
- owner (необязательный) — может принимать значения: Создатель, Пользователь, null
- region (необязательный) — может принимать значения: Северо-Запад, Сибирь, Поволжье

### 1.2 Цели тестирования
1. Проверить корректность возврата статуса продукта (1 - Готов, 0 - Не готов)
2. Проверить обработку различных комбинаций входных параметров
3. Проверить систему авторизации (валидация authToken)
4. Проверить обработку ошибок (404, 401, 500)
5. Убедиться, что необязательные параметры действительно необязательны

### 1.3 Критерии начала тестирования
- Получены и проанализированы требования к API
- Доступно тестовое окружение с развернутым API
- Подготовлены тестовые данные (валидные productId, authToken)
- Утвержден тест-план
- Определены ожидаемые результаты для различных сценариев

### 1.4 Критерии завершения тестирования
- Выполнены все запланированные тест-кейсы (100%)
- Задокументированы все найденные дефекты
- Достигнуто покрытие всех требований
- Критические и блокирующие баги исправлены и перепроверены
- Подготовлен итоговый отчет о тестировании

### 1.5 Стратегия тестирования
| Вид тестирования | Описание | Техники тест-дизайна |
|------------------|----------|----------------------|
| Функциональное | Проверка соответствия требованиям | Эквивалентное разбиение, анализ граничных значений |
| Тестирование безопасности | Проверка авторизации и аутентификации | Предугадывание ошибок |
| Тестирование API | Проверка REST API endpoints | Таблицы решений, попарное тестирование |
| Тестирование обработки ошибок | Проверка кодов ответов 401, 404, 500 | Причина-следствие |

### 1.6 Риски и ограничения
| Риск | Вероятность | Влияние | Меры по снижению |
|------|-------------|---------|------------------|
| Отсутствие реального тестового окружения | Высокая | Критическое | Использовать mock-сервер или описать ожидаемое поведение |
| Неполные тестовые данные | Средняя | Среднее | Создать дополнительные тестовые данные |
| Изменение требований в процессе | Средняя | Высокое | Регулярные согласования с заказчиком |
| Ограниченное время на тестирование | Высокая | Высокое | Приоритизация тест-кейсов по важности |

### 1.7 График работы
| Этап | Длительность | Описание работ |
|------|--------------|----------------|
| Анализ требований | 1 день | Изучение спецификации API, определение граничных значений |
| Создание тест-плана | 1 день | Документирование подхода к тестированию |
| Написание тест-кейсов | 2 дня | Создание тест-кейсов с использованием техник тест-дизайна |
| Выполнение тестирования | 3 дня | Ручное тестирование через API-клиент (Postman/Insomnia) |
| Анализ результатов и отчет | 1 день | Составление отчета о тестировании, документация дефектов |
| **Общая длительность** | **8 рабочих дней** | |

### 1.8 Ресурсы
- Инструменты: Postman/Insomnia для отправки запросов
- Документация: Спецификация API, требования
- Команда: 1 тестировщик
- Окружение: Тестовый сервер с API

### 1.9 Отслеживание прогресса
Данный раздел будет заполняться по мере выполнения работ в ходе реального тестирования.

---

## 2. Тест-кейсы

### 2.1 Позитивные тест-кейсы

#### TC-001: Успешный запрос с минимальными обязательными параметрами
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа: {"productStatus": 1} или {"productStatus": 0}
- Content-Type: application/json

#### TC-002: Успешный запрос со всеми параметрами
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, recalculate=true, owner=Создатель, region=Северо-Запад  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&recalculate=true&owner=Создатель&region=Северо-Запад
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus
- Content-Type: application/json

#### TC-003: Запрос с recalculate=true
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, recalculate=true  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&recalculate=true
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus

#### TC-004: Запрос с recalculate=false
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, recalculate=false  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&recalculate=false
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus

#### TC-005: Запрос с recalculate=null
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, recalculate=null  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&recalculate=null
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus

#### TC-006: Запрос с owner=Создатель
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, owner=Создатель  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&owner=Создатель
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus

#### TC-007: Запрос с owner=Пользователь
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, owner=Пользователь  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&owner=Пользователь
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus

#### TC-008: Запрос с owner=null
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, owner=null  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&owner=null
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus

#### TC-009: Запрос с region=Северо-Запад
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, region=Северо-Запад  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&region=Северо-Запад
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus

#### TC-010: Запрос с region=Сибирь
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, region=Сибирь  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&region=Сибирь
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus

#### TC-011: Запрос с region=Поволжье
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, region=Поволжье  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&region=Поволжье
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus

#### TC-012: Запрос без необязательных параметров
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200
- Тело ответа содержит поле productStatus

### 2.2 Негативные тест-кейсы

#### TC-013: Запрос без authToken
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100  
**Шаги:**
1. Отправить GET запрос: /products/100/status
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 401

#### TC-014: Запрос с неверным authToken
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=invalid_token123  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=invalid_token123
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 401

#### TC-015: Запрос с authToken из 15 символов
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh7 (15 символов)  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh7
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 401

#### TC-016: Запрос с authToken из 17 символов
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh789 (17 символов)  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh789
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 401

#### TC-017: Запрос с authToken содержащим спецсимволы
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123!@#456gh78  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123!@#456gh78
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 401

#### TC-018: Запрос к несуществующему продукту
**Тестовые данные:** productId=999999, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запрос: /products/999999/status?authToken=abc123def456gh78
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 404

#### TC-019: Запрос с неверным значением recalculate
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, recalculate=wrong_value  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&recalculate=wrong_value
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200 (если система игнорирует невалидные значения) или 500 (если вызывает ошибку сервера)  
  *Примечание: В требованиях не указано поведение при невалидных значениях параметров*

#### TC-020: Запрос с неверным значением параметра owner
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, owner=НедопустимоеЗначение  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&owner=НедопустимоеЗначение
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200 (если система игнорирует невалидные значения) или 500 (если вызывает ошибку сервера)

#### TC-021: Запрос с неверным значением параметра region
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78, region=НедопустимыйРегион  
**Шаги:**
1. Отправить GET запрос: /products/100/status?authToken=abc123def456gh78&region=НедопустимыйРегион
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 200 (если система игнорирует невалидные значения) или 500 (если вызывает ошибку сервера)

#### TC-022: Запрос с очень длинным productId
**Тестовые данные:** productId=123456789012345678901234567890, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запрос: /products/123456789012345678901234567890/status?authToken=abc123def456gh78
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 404 (если не найден) или 500 (ошибка сервера)

#### TC-023: Запрос с productId=0
**Тестовые данные:** productId=0, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запрос: /products/0/status?authToken=abc123def456gh78
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 404

#### TC-024: Запрос с отрицательным productId
**Тестовые данные:** productId=-100, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запрос: /products/-100/status?authToken=abc123def456gh78
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 404 (если не найден) или 500 (ошибка сервера)

#### TC-025: Запрос с productId содержащим буквы
**Тестовые данные:** productId=abc, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запрос: /products/abc/status?authToken=abc123def456gh78
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 500 (ошибка сервера при обработке некорректного productId)
- Тело ответа: {"errorMessage": "..."}

#### TC-026: Провокация ошибки сервера (слишком длинный URL)
**Тестовые данные:** productId=100, authToken=abc123def456gh78, dummy=очень_длинная_строка...  
**Шаги:**
1. Отправить GET запрос с параметром dummy, содержащим строку длиной 10000 символов: /products/100/status?authToken=abc123def456gh78&dummy=очень_длинная_строка...
2. Зафиксировать ответ сервера  
   **Ожидаемый результат:**
- HTTP статус: 500
- Тело ответа: {"errorMessage": "..."}

### 2.3 Тест-кейсы для проверки комбинаций параметров (попарное тестирование)

#### TC-027: Комбинация recalculate и owner
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запросы со следующими комбинациями:
    - recalculate=true&owner=Создатель
    - recalculate=false&owner=Пользователь
    - recalculate=null&owner=null
2. Зафиксировать ответы сервера  
   **Ожидаемый результат:**
- HTTP статус: 200 для всех запросов
- Тело ответа содержит поле productStatus

#### TC-028: Комбинация recalculate и region
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запросы со следующими комбинациями:
    - recalculate=true&region=Северо-Запад
    - recalculate=false&region=Сибирь
    - recalculate=null&region=Поволжье
2. Зафиксировать ответы сервера  
   **Ожидаемый результат:**
- HTTP статус: 200 для всех запросов
- Тело ответа содержит поле productStatus

#### TC-029: Комбинация owner и region
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запросы со следующими комбинациями:
    - owner=Создатель&region=Северо-Запад
    - owner=Пользователь&region=Сибирь
    - owner=null&region=Поволжье
2. Зафиксировать ответы сервера  
   **Ожидаемый результат:**
- HTTP статус: 200 для всех запросов
- Тело ответа содержит поле productStatus

#### TC-030: Комбинация всех трех параметров
**Предусловия:** Продукт с ID=100 существует в системе  
**Тестовые данные:** productId=100, authToken=abc123def456gh78  
**Шаги:**
1. Отправить GET запросы со следующими комбинациями:
    - recalculate=true&owner=Создатель&region=Северо-Запад
    - recalculate=false&owner=Пользователь&region=Сибирь
    - recalculate=null&owner=null&region=Поволжье
2. Зафиксировать ответы сервера  
   **Ожидаемый результат:**
- HTTP статус: 200 для всех запросов
- Тело ответа содержит поле productStatus

---

## 3. Матрица трассировки требований (RTM)
| ID требования | Описание требования | ID тест-кейса | Статус покрытия |
|---------------|---------------------|---------------|-----------------|
| REQ-01 | API возвращает статус продукта | TC-001, TC-002 | ✓ |
| REQ-02 | Параметры recalculate, owner, region необязательные | TC-012 | ✓ |
| REQ-03 | Параметры не коррелируют между собой | TC-027, TC-028, TC-029, TC-030 | ✓ |
| REQ-04 | authToken - 16 символов, цифры и буквы | TC-015, TC-016, TC-017 | ✓ |
| REQ-05 | Возврат JSON с productStatus | TC-001, TC-002 | ✓ |
| REQ-06 | Допустимые значения productStatus: 1, 0 | TC-001 | ✓ |
| REQ-07 | Продукт не найден → 404 | TC-018 | ✓ |
| REQ-08 | Неверный/отсутствующий токен → 401 | TC-013, TC-014 | ✓ |
| REQ-09 | Ошибка сервера → 500 | TC-026 | ✓ |

---

## 4. Использованные техники тест-дизайна
**Эквивалентное разбиение:**
- Группы значений для recalculate: true, false, null
- Группы значений для owner: Создатель, Пользователь, null
- Группы значений для region: Северо-Запад, Сибирь, Поволжье
- Группы значений для authToken: валидные (16 символов), невалидные

**Анализ граничных значений:**
- Длина authToken: 15, 16, 17 символов
- productId: 0, отрицательный, очень длинный
- Пустые значения параметров

**Попарное тестирование (Pairwise):**
- Комбинации необязательных параметров recalculate, owner, region
- Минимизация количества тестов при сохранении покрытия

**Причина-следствие:**
- Неверный токен → 401
- Несуществующий продукт → 404
- Ошибка сервера → 500

**Предугадывание ошибок:**
- Провокация ошибок сервера
- Некорректные значения параметров
- Специальные символы в параметрах

---

## 5. Примечания и рекомендации
**Для выполнения тестов необходимо:**
- Тестовое окружение с развернутым API
- Инструмент для отправки HTTP-запросов (Postman, curl, Insomnia и др.)
- Валидные тестовые данные (productId, authToken)

**При обнаружении дефектов рекомендуется:**
- Зафиксировать шаги воспроизведения
- Указать фактический и ожидаемый результат
- Приложить логи/скриншоты запросов и ответов
- Создать баг-репорт с указанием серьезности и приоритета

**Особенности тестирования:**
- Параметры recalculate, owner, region необязательные и не коррелируют между собой
- authToken должен быть строго 16 символов (цифры и буквы)
- При отсутствии токена или неверном токене возвращается 401
- При несуществующем продукте возвращается 404
- При внутренней ошибке сервера возвращается 500
- В требованиях не указано поведение при невалидных значениях параметров (TC-019, TC-020, TC-021)
